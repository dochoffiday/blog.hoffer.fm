<!DOCTYPE html>
<html>
<head>
    
<base href="/" />
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="description" content="AJ Hoffer is a software engineer living in Lancaster, PA who helps people solve problems" />
<meta name="author" content="AJ Hoffer" />
<title>Improved ASP.NET MVC Sections - AJ Hoffer</title>

<link rel="apple-touch-icon" sizes="57x57" href="/assets/favicons/apple-icon-57x57.png">
<link rel="apple-touch-icon" sizes="60x60" href="/assets/favicons/apple-icon-60x60.png">
<link rel="apple-touch-icon" sizes="72x72" href="/assets/favicons/apple-icon-72x72.png">
<link rel="apple-touch-icon" sizes="76x76" href="/assets/favicons/apple-icon-76x76.png">
<link rel="apple-touch-icon" sizes="114x114" href="/assets/favicons/apple-icon-114x114.png">
<link rel="apple-touch-icon" sizes="120x120" href="/assets/favicons/apple-icon-120x120.png">
<link rel="apple-touch-icon" sizes="144x144" href="/assets/favicons/apple-icon-144x144.png">
<link rel="apple-touch-icon" sizes="152x152" href="/assets/favicons/apple-icon-152x152.png">
<link rel="apple-touch-icon" sizes="180x180" href="/assets/favicons/apple-icon-180x180.png">
<link rel="icon" type="image/png" sizes="192x192" href="/assets/favicons/android-icon-192x192.png">
<link rel="icon" type="image/png" sizes="32x32" href="/assets/favicons/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="96x96" href="/assets/favicons/favicon-96x96.png">
<link rel="icon" type="image/png" sizes="16x16" href="/assets/favicons/favicon-16x16.png">
<link rel="manifest" href="/assets/favicons/manifest.json">
<meta name="msapplication-TileColor" content="#ffffff">
<meta name="msapplication-TileImage" content="/ms-icon-144x144.png">
<meta name="theme-color" content="#ffffff">

<link href="/assets/css/style.min.css" rel="stylesheet" />
<link type="application/rss+xml" rel="alternate" title="AJ Hoffer&#x27;s Blog" href=/rss/ />

    
    <meta property="og:type" content="article">
    <meta property="og:title" content="Improved ASP.NET MVC Sections">

</head>
<body>
    <div id="main">
        <header>
    <a href="/">
        👨‍🚀💬
    </a>
</header>
            <section class="post">
        <h1>Improved ASP.NET MVC Sections</h1>
        <p><em>I'm taking a break from my <a href="/personal/a-yuppies-guide-to-walking-in-the-rain-like-a-man">umbrella</a> series in an effort to contribute to society, instead of distracting it!</em></p>
<p>I <em>really</em> wanted to like <a href="http://weblogs.asp.net/scottgu/archive/2010/12/30/asp-net-mvc-3-layouts-and-sections-with-razor.aspx">ASP.NET MVC Sections</a>... but I just couldn't. They just seem so rigid.</p>
<p>For instance, say I had a section right before the end of my body tag to stash all JavaScript files -- this is great, except I can only add code to this section one time, from one View. But what if my View renders other [partial] Views, all of which need to add JavaScript to the end of the body? Because of this drawback, sections became almost entirely useless to me.</p>
<p><a href="http://www.orchardproject.net/">Orchard</a> [a popular CMS engine I've talked about <a href="/professional/orchard-cms-errors-when-pushing-changes-in-the-migrations-file">before</a>] has the <a href="http://orchard.codeplex.com/discussions/283849">Script.Head()</a> and Script.Foot() methods, and these seemed like a big improvement. You could add code to these anywhere, and as many times as you liked. Unfortunately, while it is a step in the right direction, it still isn't quite dynamic enough. It only allows two sections: the head and the foot (and not to mention the application has to be built within Orchard). So yet again, even though these Orchard helpers are good, they aren't good enough.</p>
<h3 id="the-solution">The Solution</h3>
<p>Piggybacking of off some other <a href="http://stackoverflow.com/a/5433722/234132">solutions</a>, I was able to create something that gave me everything I wanted:</p>
<ol>
<li>Unlimited sections</li>
<li>No restriction on the number of codes blocks that could be added to a section</li>
</ol>
<p>The source code is hosted on <a href="https://github.com/dochoffiday/FlexibleSections">GitHub</a>, so I won't reproduce it here, but I will show you how easy it is to use.</p>
<p>In your layout View, or wherever you want the section to be rendered, include the following code:</p>
<pre><code>&lt;!DOCTYPE html&gt;
&lt;html lang=&quot;en&quot;&gt;
&lt;head&gt;
    &lt;title&gt;&#64;ViewBag.Title&lt;/title&gt;
    &#64;this.Section(&quot;header&quot;)
&lt;/head&gt;
&lt;body&gt;
    &#64;this.Section(&quot;prebody&quot;)

    &#64;RenderBody()
           
    &#64;this.Section(&quot;footer&quot;)
&lt;/body&gt;
&lt;/html&gt;
</code></pre>
<p>Then, to add content blocks to your sections:</p>
<pre><code>&#64;using(this.AddToSection(&quot;footer&quot;))
{
    &lt;script src=&quot;//js.stripe.com/v2/&quot; type=&quot;text/javascript&quot;&gt;&lt;/script&gt;
}

&#64;using(this.AddToSection(&quot;footer&quot;))
{
    &lt;div&gt;add as many code blocks as you want!&lt;/div&gt;
}
</code></pre>
<p><a href="http://www.youtube.com/watch?v=NeFI9aPZvKI#t=44">That's it and that's all</a>! There are some improvements that could be made, like a parameter to order the content added to a section, but even in its basic form, I hope it's helpful!</p>
<p><em>Available as a <a href="https://www.nuget.org/packages/FlexibleSections/">NuGet pacakge</a>!</em></p>
<p><a href="https://github.com/dochoffiday/FlexibleSections" class="highlight">Fork On GitHub!</a></p>

        <p class="meta">
            ~ posted in <a href="/categories/professional">professional</a> on 01.25.2014
        </p>
        <script src="https://utteranc.es/client.js"
            repo="dochoffiday/blog.hoffer.fm"
            issue-term="pathname"
            label="utterances-comments"
            theme="github-light"
            crossorigin="anonymous"
            async>
        </script>
    </section>


        <hr />
        <footer>
    &copy;
    <script>document.write(new Date().getFullYear())</script>
    🤓
    <a href="https://hoffer.fm">AJ Hoffer</a>
    |
    <a href="https://github.com/dochoffiday">GitHub</a>
    |
    <a href="https://stackoverflow.com/users/234132/dochoffiday">StackOverflow</a>
</footer>
    </div>
</body>
</html>